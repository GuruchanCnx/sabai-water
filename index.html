<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sabaai Water Stations</title>
    <style>
        :root {
            --primary: #4fc3f7;
            --secondary: #29b6f6;
            --accent: #0288d1;
            --light: #e1f5fe;
            --white: #ffffff;
            --text: #263238;
            --shadow: 0 4px 12px rgba(79, 195, 247, 0.2);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--light) 0%, #b3e5fc 100%);
            color: var(--text);
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--white);
            padding: 1rem;
            text-align: center;
            position: relative;
            box-shadow: var(--shadow);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            fill: var(--white);
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .header-subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .language-dropdown {
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
        }

        .lang-toggle {
            background: rgba(255,255,255,0.2);
            color: var(--white);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }

        .lang-toggle:hover {
            background: rgba(255,255,255,0.3);
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
            padding: 0.5rem 0;
            min-width: 200px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            border: 2px solid var(--light);
        }

        .lang-dropdown.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .lang-option {
            padding: 0.75rem 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: var(--text);
            transition: var(--transition);
            border-radius: 8px;
            margin: 0.25rem 0.5rem;
        }

        .lang-option:hover {
            background: var(--light);
            color: var(--accent);
        }

        .lang-option.active {
            background: rgba(79, 195, 247, 0.2);
            color: var(--accent);
            font-weight: 600;
        }

        .container {
            display: flex;
            height: calc(100vh - 100px);
            padding: 1rem;
            gap: 1rem;
        }

        .sidebar {
            width: 300px;
            background: var(--white);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .map-container {
            flex: 1;
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        #map {
            height: 100%;
            width: 100%;
            background: linear-gradient(135deg, #b3e5fc 0%, #81d4fa 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text);
        }

        .station-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .station-item {
            background: linear-gradient(135deg, var(--white), #f5f9ff);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--light);
            position: relative;
            overflow: hidden;
        }

        .station-item::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--primary);
            transition: var(--transition);
        }

        .station-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(79, 195, 247, 0.2);
            border-color: var(--primary);
        }

        .station-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .station-name {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--accent);
            margin-bottom: 0.25rem;
        }

        .station-price {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--white);
            padding: 0.35rem 0.75rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
            display: inline-block;
        }

        .station-address {
            font-size: 0.9rem;
            color: #78909c;
            margin-bottom: 0.75rem;
        }

        .station-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-secondary {
            background: var(--light);
            color: var(--accent);
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--light);
            border-radius: 12px;
            font-size: 1rem;
            transition: var(--transition);
            background: var(--white);
        }

        .current-location {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--white);
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        /* Price Legend Button */
        .legend-toggle {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: var(--white);
            color: var(--accent);
            border: 2px solid var(--light);
            padding: 0.75rem 1rem;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: var(--shadow);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
        }

        .legend-toggle:hover {
            background: var(--light);
            transform: translateY(-2px);
        }

        .legend-toggle svg {
            width: 16px;
            height: 16px;
            transition: transform 0.3s ease;
        }

        .legend-toggle.expanded svg {
            transform: rotate(180deg);
        }

        /* Retractable Legend */
        .legend {
            position: absolute;
            bottom: 70px;
            left: 20px;
            background: rgba(255,255,255,0.95);
            padding: 1rem;
            border-radius: 16px;
            box-shadow: var(--shadow);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .legend.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .legend-title {
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: var(--accent);
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--white);
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 12px 32px rgba(0,0,0,0.2);
            transform: translateY(20px);
            transition: var(--transition);
            position: relative;
        }

        .modal-overlay.show .modal {
            transform: translateY(0);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--white);
            padding: 1.25rem 1.5rem;
            border-radius: 16px 16px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .modal-close {
            background: rgba(255,255,255,0.2);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            color: var(--white);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--light);
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .rating-control {
            display: flex;
            gap: 0.25rem;
            margin: 0.5rem 0;
        }

        .rating-star {
            width: 32px;
            height: 32px;
            cursor: pointer;
            color: var(--light);
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .rating-star.active, .rating-star:hover {
            color: #ffa726;
            transform: scale(1.1);
        }

        .photo-upload {
            border: 2px dashed var(--light);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin: 1rem 0;
        }

        .photo-upload:hover {
            border-color: var(--primary);
            background: rgba(79, 195, 247, 0.05);
        }

        .photo-upload-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .photo-preview {
            display: none;
            margin: 1rem 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .photo-preview img {
            width: 100%;
            height: auto;
            display: block;
        }

        .condition-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .condition-tag {
            padding: 0.5rem 1rem;
            background: var(--light);
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .condition-tag:hover {
            background: var(--primary);
            color: var(--white);
        }

        .condition-tag.selected {
            background: var(--primary);
            color: var(--white);
            border-color: var(--white);
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--light);
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
            background: rgba(225, 245, 254, 0.5);
        }

        .btn-submit {
            background: linear-gradient(135deg, #66bb6a, #43a047);
            color: var(--white);
        }

        .btn-cancel {
            background: var(--light);
            color: var(--text);
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                height: auto;
                padding: 0.5rem;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                max-height: none;
                padding: 1rem;
            }
            
            .map-container {
                height: 400px;
            }
            
            .legend-toggle {
                bottom: 15px;
                left: 15px;
                padding: 0.5rem 0.75rem;
                font-size: 0.85rem;
            }
            
            .legend {
                bottom: 60px;
                left: 15px;
                padding: 0.75rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <!-- Modern, minimalist water drop logo -->
            <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
            </svg>
            <span class="logo-text">Sabaai Water</span>
        </div>
        <p class="header-subtitle" id="pageSubtitle">Find reverse osmosis water stations within 2km radius</p>
        
        <div class="language-dropdown">
            <button class="lang-toggle" id="langToggle">
                <span id="currentLanguage">English</span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
            </button>
            <div class="lang-dropdown" id="langDropdown">
                <div class="lang-option active" data-lang="en">
                    <img src="https://flagcdn.com/w20/us.png" alt="English" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>English</span>
                </div>
                <div class="lang-option" data-lang="th">
                    <img src="https://flagcdn.com/w20/th.png" alt="Thai" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>ไทย</span>
                </div>
                <div class="lang-option" data-lang="zh">
                    <img src="https://flagcdn.com/w20/cn.png" alt="Chinese" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>中文</span>
                </div>
                <div class="lang-option" data-lang="ko">
                    <img src="https://flagcdn.com/w20/kr.png" alt="Korean" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>한국어</span>
                </div>
                <div class="lang-option" data-lang="ja">
                    <img src="https://flagcdn.com/w20/jp.png" alt="Japanese" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>日本語</span>
                </div>
                <div class="lang-option" data-lang="ru">
                    <img src="https://flagcdn.com/w20/ru.png" alt="Russian" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>Русский</span>
                </div>
                <div class="lang-option" data-lang="fr">
                    <img src="https://flagcdn.com/w20/fr.png" alt="French" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>Français</span>
                </div>
                <div class="lang-option" data-lang="es">
                    <img src="https://flagcdn.com/w20/es.png" alt="Spanish" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>Español</span>
                </div>
                <div class="lang-option" data-lang="pt">
                    <img src="https://flagcdn.com/w20/pt.png" alt="Portuguese" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>Português</span>
                </div>
                <div class="lang-option" data-lang="it">
                    <img src="https://flagcdn.com/w20/it.png" alt="Italian" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>Italiano</span>
                </div>
                <div class="lang-option" data-lang="de">
                    <img src="https://flagcdn.com/w20/de.png" alt="German" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>Deutsch</span>
                </div>
                <div class="lang-option" data-lang="ar">
                    <img src="https://flagcdn.com/w20/sa.png" alt="Arabic" style="width:24px; height:16px; border-radius:3px; margin-right:0.5rem;">
                    <span>العربية</span>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="sidebar">
            <button class="current-location" id="locateMe">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                </svg>
                <span id="locateMeText">Find My Location</span>
            </button>
            
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Search for stations...">
            </div>
            
            <div class="station-list" id="stationList">
                <!-- Stations will be populated here -->
                <div style="text-align:center; padding:2rem; color:#78909c;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#78909c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin:0 auto 1rem; display:block;">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                        <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    <p id="noStationsText">Tap "Find My Location" to see nearby stations</p>
                </div>
            </div>
        </div>
        
        <div class="map-container">
            <div id="map">
                <div style="text-align:center; padding:2rem; color:#263238;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#4fc3f7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin:0 auto 1rem; display:block;">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                        <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    <h3 style="margin-bottom:0.5rem;" id="mapTitle">Sabaai Water Map</h3>
                    <p style="font-size:0.9rem; color:#78909c;" id="mapSubtitle">Tap "Find My Location" to activate map</p>
                </div>
            </div>
            
            <!-- Retractable Price Legend Button -->
            <button class="legend-toggle" id="legendToggle">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="6 9 12 15 18 9"></polyline>
                </svg>
                <span id="legendToggleText">Price Legend</span>
            </button>
            
            <!-- Retractable Price Legend -->
            <div class="legend" id="priceLegend">
                <h3 id="legendTitle">Price Legend</h3>
                <div class="legend-item">
                    <div class="legend-color" style="background-color:#66bb6a;"></div>
                    <span id="priceRange1">฿0.50-0.70 per liter</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color:#ffa726;"></div>
                    <span id="priceRange2">฿0.70-0.90 per liter</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color:#ef5350;"></div>
                    <span id="priceRange3">฿0.90-1.00 per liter</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Review Modal -->
    <div class="modal-overlay" id="reviewModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="reviewModalTitle">Add Review</h3>
                <button class="modal-close" id="closeReviewModal">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="reviewStationId">
                
                <div class="form-group">
                    <label class="form-label" for="reviewRating" id="ratingLabel">Rating</label>
                    <div class="rating-control" id="ratingControl">
                        <span class="rating-star" data-value="1">★</span>
                        <span class="rating-star" data-value="2">★</span>
                        <span class="rating-star" data-value="3">★</span>
                        <span class="rating-star" data-value="4">★</span>
                        <span class="rating-star" data-value="5">★</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="reviewTitle" id="titleLabel">Title</label>
                    <input type="text" class="form-control" id="reviewTitle" placeholder="Enter a title for your review">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="reviewContent" id="contentLabel">Review</label>
                    <textarea class="form-control" id="reviewContent" placeholder="Share your experience with this station..."></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" id="conditionLabel">Station Condition</label>
                    <div class="condition-tags">
                        <span class="condition-tag" data-condition="working">✅ Working Well</span>
                        <span class="condition-tag" data-condition="filter">🔄 Filter Changed Recently</span>
                        <span class="condition-tag" data-condition="jammed">🪙 Coin Slot Jammed</span>
                        <span class="condition-tag" data-condition="broken">❌ Out of Service</span>
                        <span class="condition-tag" data-condition="dirty">🧹 Needs Cleaning</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <div class="photo-upload" id="photoUpload">
                        <div class="photo-upload-icon">📷</div>
                        <p id="uploadPhotoText">Upload Photo of Station</p>
                        <input type="file" id="photoInput" accept="image/*" capture="environment" style="display: none;">
                    </div>
                    <div class="photo-preview" id="photoPreview">
                        <img id="previewImage" src="" alt="Preview">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel" id="cancelReview">Cancel</button>
                <button class="btn btn-submit" id="submitReview">Submit Review</button>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive translation dictionary for 12 languages with updated pricing
        const translations = {
            en: {
                pageSubtitle: "Find reverse osmosis water stations within 2km radius",
                locateMeText: "Find My Location",
                searchPlaceholder: "Search for stations...",
                getDirections: "Get Directions",
                addReview: "Add Review",
                viewReviews: "View Reviews",
                noStationsText: "Tap \"Find My Location\" to see nearby stations",
                mapTitle: "Sabaai Water Map",
                mapSubtitle: "Tap \"Find My Location\" to activate map",
                legendTitle: "Price Legend",
                priceRange1: "฿0.50-0.70 per liter",
                priceRange2: "฿0.70-0.90 per liter",
                priceRange3: "฿0.90-1.00 per liter",
                legendToggleText: "Price Legend",
                reviewModalTitle: "Add Review",
                ratingLabel: "Rating",
                titleLabel: "Title",
                contentLabel: "Review",
                conditionLabel: "Station Condition",
                uploadPhotoText: "Upload Photo of Station",
                submitReview: "Submit Review",
                cancel: "Cancel",
                reviewSubmitted: "Review submitted successfully!",
                photoTooLarge: "Photo is too large. Please select a smaller image.",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            },
            th: {
                pageSubtitle: "ค้นหาสถานีน้ำออสโมซิสย้อนกลับภายในรัศมี 2 กิโลเมตร",
                locateMeText: "ค้นหาตำแหน่งของฉัน",
                searchPlaceholder: "ค้นหาสถานี...",
                getDirections: "ขอเส้นทาง",
                addReview: "เพิ่มรีวิว",
                viewReviews: "ดูรีวิว",
                noStationsText: "แตะ \"ค้นหาตำแหน่งของฉัน\" เพื่อดูสถานีใกล้เคียง",
                mapTitle: "แผนที่น้ำสบาย",
                mapSubtitle: "แตะ \"ค้นหาตำแหน่งของฉัน\" เพื่อเปิดใช้งานแผนที่",
                legendTitle: "คำอธิบายราคา",
                priceRange1: "฿0.50-0.70 ต่อลิตร",
                priceRange2: "฿0.70-0.90 ต่อลิตร",
                priceRange3: "฿0.90-1.00 ต่อลิตร",
                legendToggleText: "คำอธิบายราคา",
                reviewModalTitle: "เพิ่มรีวิว",
                ratingLabel: "คะแนน",
                titleLabel: "หัวข้อ",
                contentLabel: "รีวิว",
                conditionLabel: "สภาพสถานี",
                uploadPhotoText: "อัปโหลดรูปภาพของสถานี",
                submitReview: "ส่งรีวิว",
                cancel: "ยกเลิก",
                reviewSubmitted: "ส่งรีวิวเรียบร้อยแล้ว!",
                photoTooLarge: "รูปภาพมีขนาดใหญ่เกินไป กรุณาเลือกรูปภาพที่มีขนาดเล็กกว่า",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            },
            zh: {
                pageSubtitle: "查找半径2公里范围内的反渗透水站",
                locateMeText: "查找我的位置",
                searchPlaceholder: "搜索站点...",
                getDirections: "获取路线",
                addReview: "添加评价",
                viewReviews: "查看评价",
                noStationsText: "点击\"查找我的位置\"查看附近的站点",
                mapTitle: "萨拜水地图",
                mapSubtitle: "点击\"查找我的位置\"激活地图",
                legendTitle: "价格图例",
                priceRange1: "฿0.50-0.70 每升",
                priceRange2: "฿0.70-0.90 每升",
                priceRange3: "฿0.90-1.00 每升",
                legendToggleText: "价格图例",
                reviewModalTitle: "添加评价",
                ratingLabel: "评分",
                titleLabel: "标题",
                contentLabel: "评价内容",
                conditionLabel: "站点状况",
                uploadPhotoText: "上传站点照片",
                submitReview: "提交评价",
                cancel: "取消",
                reviewSubmitted: "评价提交成功！",
                photoTooLarge: "照片太大，请选择较小的图片。",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            },
            ko: {
                pageSubtitle: "2km 반경 내의 역삼투수 정수기 찾기",
                locateMeText: "내 위치 찾기",
                searchPlaceholder: "정수기 검색...",
                getDirections: "길찾기",
                addReview: "리뷰 추가",
                viewReviews: "리뷰 보기",
                noStationsText: "\"내 위치 찾기\"를 탭하여 근처 정수기를 확인하세요",
                mapTitle: "사바이 워터 맵",
                mapSubtitle: "\"내 위치 찾기\"를 탭하여 맵 활성화",
                legendTitle: "가격 범례",
                priceRange1: "리터당 ฿0.50-0.70",
                priceRange2: "리터당 ฿0.70-0.90",
                priceRange3: "리터당 ฿0.90-1.00",
                legendToggleText: "가격 범례",
                reviewModalTitle: "리뷰 추가",
                ratingLabel: "평점",
                titleLabel: "제목",
                contentLabel: "리뷰",
                conditionLabel: "정수기 상태",
                uploadPhotoText: "정수기 사진 업로드",
                submitReview: "리뷰 제출",
                cancel: "취소",
                reviewSubmitted: "리뷰가 성공적으로 제출되었습니다!",
                photoTooLarge: "사진이 너무 큽니다. 더 작은 이미지를 선택해주세요.",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            },
            ja: {
                pageSubtitle: "半径2km以内の逆浸透膜浄水ステーションを探す",
                locateMeText: "現在地を検索",
                searchPlaceholder: "ステーションを検索...",
                getDirections: "ルート案内",
                addReview: "レビューを追加",
                viewReviews: "レビューを表示",
                noStationsText: "「現在地を検索」をタップして近くのステーションを表示",
                mapTitle: "サバイウォーターマップ",
                mapSubtitle: "「現在地を検索」をタップしてマップを有効化",
                legendTitle: "価格の凡例",
                priceRange1: "1リットルあたり฿0.50-0.70",
                priceRange2: "1リットルあたり฿0.70-0.90",
                priceRange3: "1リットルあたり฿0.90-1.00",
                legendToggleText: "価格の凡例",
                reviewModalTitle: "レビューを追加",
                ratingLabel: "評価",
                titleLabel: "タイトル",
                contentLabel: "レビュー",
                conditionLabel: "ステーションの状態",
                uploadPhotoText: "ステーションの写真をアップロード",
                submitReview: "レビューを送信",
                cancel: "キャンセル",
                reviewSubmitted: "レビューが正常に送信されました！",
                photoTooLarge: "写真が大きすぎます。小さい画像を選択してください。",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            },
            ru: {
                pageSubtitle: "Найдите станции обратного осмоса в радиусе 2 км",
                locateMeText: "Найти мое местоположение",
                searchPlaceholder: "Поиск станций...",
                getDirections: "Построить маршрут",
                addReview: "Добавить отзыв",
                viewReviews: "Просмотреть отзывы",
                noStationsText: "Нажмите \"Найти мое местоположение\", чтобы увидеть ближайшие станции",
                mapTitle: "Карта воды Sabaai",
                mapSubtitle: "Нажмите \"Найти мое местоположение\", чтобы активировать карту",
                legendTitle: "Легенда цен",
                priceRange1: "฿0.50-0.70 за литр",
                priceRange2: "฿0.70-0.90 за литр",
                priceRange3: "฿0.90-1.00 за литр",
                legendToggleText: "Легенда цен",
                reviewModalTitle: "Добавить отзыв",
                ratingLabel: "Рейтинг",
                titleLabel: "Заголовок",
                contentLabel: "Отзыв",
                conditionLabel: "Состояние станции",
                uploadPhotoText: "Загрузить фото станции",
                submitReview: "Отправить отзыв",
                cancel: "Отмена",
                reviewSubmitted: "Отзыв успешно отправлен!",
                photoTooLarge: "Фото слишком большое. Пожалуйста, выберите изображение меньшего размера.",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            },
            fr: {
                pageSubtitle: "Trouvez les stations d'osmose inverse dans un rayon de 2 km",
                locateMeText: "Trouver ma position",
                searchPlaceholder: "Rechercher des stations...",
                getDirections: "Obtenir l'itinéraire",
                addReview: "Ajouter un avis",
                viewReviews: "Voir les avis",
                noStationsText: "Appuyez sur \"Trouver ma position\" pour voir les stations à proximité",
                mapTitle: "Carte Sabaai Water",
                mapSubtitle: "Appuyez sur \"Trouver ma position\" pour activer la carte",
                legendTitle: "Légende des prix",
                priceRange1: "฿0.50-0.70 par litre",
                priceRange2: "฿0.70-0.90 par litre",
                priceRange3: "฿0.90-1.00 par litre",
                legendToggleText: "Légende des prix",
                reviewModalTitle: "Ajouter un avis",
                ratingLabel: "Note",
                titleLabel: "Titre",
                contentLabel: "Avis",
                conditionLabel: "État de la station",
                uploadPhotoText: "Télécharger une photo de la station",
                submitReview: "Soumettre l'avis",
                cancel: "Annuler",
                reviewSubmitted: "Avis soumis avec succès !",
                photoTooLarge: "La photo est trop volumineuse. Veuillez sélectionner une image plus petite.",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            },
            es: {
                pageSubtitle: "Encuentre estaciones de ósmosis inversa dentro de un radio de 2 km",
                locateMeText: "Encontrar mi ubicación",
                searchPlaceholder: "Buscar estaciones...",
                getDirections: "Obtener direcciones",
                addReview: "Añadir reseña",
                viewReviews: "Ver reseñas",
                noStationsText: "Toque \"Encontrar mi ubicación\" para ver estaciones cercanas",
                mapTitle: "Mapa Sabaai Water",
                mapSubtitle: "Toque \"Encontrar mi ubicación\" para activar el mapa",
                legendTitle: "Leyenda de precios",
                priceRange1: "฿0.50-0.70 por litro",
                priceRange2: "฿0.70-0.90 por litro",
                priceRange3: "฿0.90-1.00 por litro",
                legendToggleText: "Leyenda de precios",
                reviewModalTitle: "Añadir reseña",
                ratingLabel: "Calificación",
                titleLabel: "Título",
                contentLabel: "Reseña",
                conditionLabel: "Condición de la estación",
                uploadPhotoText: "Subir foto de la estación",
                submitReview: "Enviar reseña",
                cancel: "Cancelar",
                reviewSubmitted: "¡Reseña enviada con éxito!",
                photoTooLarge: "La foto es demasiado grande. Por favor, seleccione una imagen más pequeña.",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            },
            pt: {
                pageSubtitle: "Encontre estações de osmose reversa dentro de um raio de 2 km",
                locateMeText: "Encontrar minha localização",
                searchPlaceholder: "Pesquisar estações...",
                getDirections: "Obter direções",
                addReview: "Adicionar avaliação",
                viewReviews: "Ver avaliações",
                noStationsText: "Toque em \"Encontrar minha localização\" para ver estações próximas",
                mapTitle: "Mapa Sabaai Water",
                mapSubtitle: "Toque em \"Encontrar minha localização\" para ativar o mapa",
                legendTitle: "Legenda de preços",
                priceRange1: "฿0.50-0.70 por litro",
                priceRange2: "฿0.70-0.90 por litro",
                priceRange3: "฿0.90-1.00 por litro",
                legendToggleText: "Legenda de preços",
                reviewModalTitle: "Adicionar avaliação",
                ratingLabel: "Avaliação",
                titleLabel: "Título",
                contentLabel: "Avaliação",
                conditionLabel: "Condição da estação",
                uploadPhotoText: "Carregar foto da estação",
                submitReview: "Enviar avaliação",
                cancel: "Cancelar",
                reviewSubmitted: "Avaliação enviada com sucesso!",
                photoTooLarge: "A foto é muito grande. Por favor, selecione uma imagem menor.",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            },
            it: {
                pageSubtitle: "Trova stazioni ad osmosi inversa entro un raggio di 2 km",
                locateMeText: "Trova la mia posizione",
                searchPlaceholder: "Cerca stazioni...",
                getDirections: "Ottieni indicazioni",
                addReview: "Aggiungi recensione",
                viewReviews: "Visualizza recensioni",
                noStationsText: "Tocca \"Trova la mia posizione\" per vedere le stazioni vicine",
                mapTitle: "Mappa Sabaai Water",
                mapSubtitle: "Tocca \"Trova la mia posizione\" per attivare la mappa",
                legendTitle: "Legenda prezzi",
                priceRange1: "฿0.50-0.70 al litro",
                priceRange2: "฿0.70-0.90 al litro",
                priceRange3: "฿0.90-1.00 al litro",
                legendToggleText: "Legenda prezzi",
                reviewModalTitle: "Aggiungi recensione",
                ratingLabel: "Valutazione",
                titleLabel: "Titolo",
                contentLabel: "Recensione",
                conditionLabel: "Condizione della stazione",
                uploadPhotoText: "Carica foto della stazione",
                submitReview: "Invia recensione",
                cancel: "Annulla",
                reviewSubmitted: "Recensione inviata con successo!",
                photoTooLarge: "La foto è troppo grande. Seleziona un'immagine più piccola.",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            },
            de: {
                pageSubtitle: "Finden Sie Umkehrosmose-Stationen im Umkreis von 2 km",
                locateMeText: "Meinen Standort finden",
                searchPlaceholder: "Stationen suchen...",
                getDirections: "Wegbeschreibung",
                addReview: "Bewertung hinzufügen",
                viewReviews: "Bewertungen anzeigen",
                noStationsText: "Tippen Sie auf \"Meinen Standort finden\", um nahegelegene Stationen zu sehen",
                mapTitle: "Sabaai Water Karte",
                mapSubtitle: "Tippen Sie auf \"Meinen Standort finden\", um die Karte zu aktivieren",
                legendTitle: "Preislegende",
                priceRange1: "฿0.50-0.70 pro Liter",
                priceRange2: "฿0.70-0.90 pro Liter",
                priceRange3: "฿0.90-1.00 pro Liter",
                legendToggleText: "Preislegende",
                reviewModalTitle: "Bewertung hinzufügen",
                ratingLabel: "Bewertung",
                titleLabel: "Titel",
                contentLabel: "Bewertung",
                conditionLabel: "Zustand der Station",
                uploadPhotoText: "Foto der Station hochladen",
                submitReview: "Bewertung absenden",
                cancel: "Abbrechen",
                reviewSubmitted: "Bewertung erfolgreich abgesendet!",
                photoTooLarge: "Das Foto ist zu groß. Bitte wählen Sie ein kleineres Bild aus.",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            },
            ar: {
                pageSubtitle: "ابحث عن محطات مياه التناضح العكسي ضمن نطاق 2 كم",
                locateMeText: "اعثر على موقعي",
                searchPlaceholder: "البحث عن المحطات...",
                getDirections: "الحصول على الاتجاهات",
                addReview: "إضافة تقييم",
                viewReviews: "عرض التقييمات",
                noStationsText: "انقر على \"اعثر على موقعي\" لرؤية المحطات القريبة",
                mapTitle: "خريطة ساباي للمياه",
                mapSubtitle: "انقر على \"اعثر على موقعي\" لتفعيل الخريطة",
                legendTitle: "مفتاح الأسعار",
                priceRange1: "0.50-0.70 بات للتر",
                priceRange2: "0.70-0.90 بات للتر",
                priceRange3: "0.90-1.00 بات للتر",
                legendToggleText: "مفتاح الأسعار",
                reviewModalTitle: "إضافة تقييم",
                ratingLabel: "التقييم",
                titleLabel: "العنوان",
                contentLabel: "التقييم",
                conditionLabel: "حالة المحطة",
                uploadPhotoText: "رفع صورة للمحطة",
                submitReview: "إرسال التقييم",
                cancel: "إلغاء",
                reviewSubmitted: "تم إرسال التقييم بنجاح!",
                photoTooLarge: "الصورة كبيرة جدًا. يرجى اختيار صورة أصغر.",
                languageNames: {
                    en: "English",
                    th: "ไทย",
                    zh: "中文",
                    ko: "한국어",
                    ja: "日本語",
                    ru: "Русский",
                    fr: "Français",
                    es: "Español",
                    pt: "Português",
                    it: "Italiano",
                    de: "Deutsch",
                    ar: "العربية"
                }
            }
        };

        // Current language
        let currentLang = 'en';

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set up language dropdown
            setupLanguageDropdown();
            
            // Set up price legend toggle
            setupPriceLegendToggle();
            
            // Display initial content
            updateContent();
            
            // Initialize search functionality
            document.getElementById('searchInput').addEventListener('input', handleSearch);
            
            // Initialize locate me button
            document.getElementById('locateMe').addEventListener('click', handleLocateMe);
            
            // Set up review modal
            setupReviewModal();
        });

        function setupLanguageDropdown() {
            const langToggle = document.getElementById('langToggle');
            const langDropdown = document.getElementById('langDropdown');
            const currentLanguageEl = document.getElementById('currentLanguage');
            
            langToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                langDropdown.classList.toggle('show');
                this.classList.toggle('expanded');
            });
            
            document.addEventListener('click', function(event) {
                if (!langToggle.contains(event.target) && !langDropdown.contains(event.target)) {
                    langDropdown.classList.remove('show');
                    langToggle.classList.remove('expanded');
                }
            });
            
            const langOptions = langDropdown.querySelectorAll('.lang-option');
            langOptions.forEach(option => {
                option.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const lang = this.getAttribute('data-lang');
                    changeLanguage(lang);
                    
                    langOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    
                    currentLanguageEl.textContent = translations[lang].languageNames[lang];
                    
                    langDropdown.classList.remove('show');
                    langToggle.classList.remove('expanded');
                });
            });
        }

        function setupPriceLegendToggle() {
            const legendToggle = document.getElementById('legendToggle');
            const priceLegend = document.getElementById('priceLegend');
            
            legendToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                priceLegend.classList.toggle('show');
                this.classList.toggle('expanded');
            });
            
            // Close legend when clicking outside
            document.addEventListener('click', function(event) {
                if (!legendToggle.contains(event.target) && !priceLegend.contains(event.target)) {
                    priceLegend.classList.remove('show');
                    legendToggle.classList.remove('expanded');
                }
            });
        }

        function changeLanguage(lang) {
            currentLang = lang;
            updateContent();
        }

        function updateContent() {
            // Update all text elements
            document.getElementById('pageSubtitle').textContent = translations[currentLang].pageSubtitle;
            document.getElementById('locateMeText').textContent = translations[currentLang].locateMeText;
            document.getElementById('searchInput').placeholder = translations[currentLang].searchPlaceholder;
            document.getElementById('noStationsText').textContent = translations[currentLang].noStationsText;
            document.getElementById('mapTitle').textContent = translations[currentLang].mapTitle;
            document.getElementById('mapSubtitle').textContent = translations[currentLang].mapSubtitle;
            document.getElementById('legendTitle').textContent = translations[currentLang].legendTitle;
            document.getElementById('priceRange1').textContent = translations[currentLang].priceRange1;
            document.getElementById('priceRange2').textContent = translations[currentLang].priceRange2;
            document.getElementById('priceRange3').textContent = translations[currentLang].priceRange3;
            document.getElementById('legendToggleText').textContent = translations[currentLang].legendToggleText;
            document.getElementById('reviewModalTitle').textContent = translations[currentLang].reviewModalTitle;
            document.getElementById('ratingLabel').textContent = translations[currentLang].ratingLabel;
            document.getElementById('titleLabel').textContent = translations[currentLang].titleLabel;
            document.getElementById('contentLabel').textContent = translations[currentLang].contentLabel;
            document.getElementById('conditionLabel').textContent = translations[currentLang].conditionLabel;
            document.getElementById('uploadPhotoText').textContent = translations[currentLang].uploadPhotoText;
            document.getElementById('submitReview').textContent = translations[currentLang].submitReview;
            document.getElementById('cancelReview').textContent = translations[currentLang].cancel;
            
            // Update document title
            document.title = `Sabaai Water - ${translations[currentLang].languageNames[currentLang]}`;
        }

        function handleSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const stationList = document.getElementById('stationList');
            
            if (searchTerm.length > 0) {
                // Generate random price between 0.50 and 1.00
                const prices = [0.50, 0.60, 0.70, 0.80, 0.90, 1.00];
                const randomPrice = prices[Math.floor(Math.random() * prices.length)];
                
                stationList.innerHTML = `
                    <div style="padding:1rem; background:#f5f9ff; border-radius:8px; margin:0.5rem 0;">
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem;">
                            <div>
                                <div style="font-weight:700; color:#0288d1;">${translations[currentLang].languageNames[currentLang]} Station</div>
                                <div style="font-size:0.9rem; color:#78909c;">123 Example Road, Chiang Mai</div>
                            </div>
                            <div style="background:linear-gradient(135deg,#4fc3f7,#29b6f6); color:white; padding:0.25rem 0.5rem; border-radius:20px; font-weight:700;">฿${randomPrice.toFixed(2)}</div>
                        </div>
                        <div style="display:flex; justify-content:space-between; align-items:center; margin:0.5rem 0;">
                            <div style="display:flex; gap:0.5rem; align-items:center;">
                                <div style="color:#66bb6a; font-size:0.9rem;">★★★★★</div>
                                <div style="font-size:0.85rem; color:#78909c;">${translations[currentLang].languageNames[currentLang]}: 0.5 km</div>
                            </div>
                            <div style="display:flex; gap:0.5rem;">
                                <button style="padding:0.5rem 1rem; background:#4fc3f7; color:white; border:none; border-radius:8px; font-size:0.85rem; cursor:pointer;">${translations[currentLang].getDirections}</button>
                                <button style="padding:0.5rem 1rem; background:#e1f5fe; color:#0288d1; border:none; border-radius:8px; font-size:0.85rem; cursor:pointer;">${translations[currentLang].addReview}</button>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                stationList.innerHTML = `
                    <div style="text-align:center; padding:2rem; color:#78909c;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#78909c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin:0 auto 1rem; display:block;">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                        <p>${translations[currentLang].noStationsText}</p>
                    </div>
                `;
            }
        }

        function handleLocateMe() {
            alert(`📍 ${translations[currentLang].locateMeText} - Location feature would activate here in a real app`);
        }

        function setupReviewModal() {
            const reviewModal = document.getElementById('reviewModal');
            const closeReviewModal = document.getElementById('closeReviewModal');
            const cancelReview = document.getElementById('cancelReview');
            const submitReview = document.getElementById('submitReview');
            const photoUpload = document.getElementById('photoUpload');
            const photoInput = document.getElementById('photoInput');
            const photoPreview = document.getElementById('photoPreview');
            const previewImage = document.getElementById('previewImage');
            const ratingStars = document.querySelectorAll('.rating-star');
            const conditionTags = document.querySelectorAll('.condition-tag');
            
            closeReviewModal.addEventListener('click', () => {
                reviewModal.classList.remove('show');
            });
            
            cancelReview.addEventListener('click', () => {
                reviewModal.classList.remove('show');
            });
            
            reviewModal.addEventListener('click', (e) => {
                if (e.target === reviewModal) {
                    reviewModal.classList.remove('show');
                }
            });
            
            photoUpload.addEventListener('click', () => {
                photoInput.click();
            });
            
            photoInput.addEventListener('change', (e) => {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        previewImage.src = e.target.result;
                        photoPreview.style.display = 'block';
                    };
                    reader.readAsDataURL(e.target.files[0]);
                }
            });
            
            ratingStars.forEach(star => {
                star.addEventListener('click', () => {
                    ratingStars.forEach(s => s.style.color = '#b0bec5');
                    star.style.color = '#ffa726';
                });
            });
            
            conditionTags.forEach(tag => {
                tag.addEventListener('click', () => {
                    tag.classList.toggle('selected');
                });
            });
            
            submitReview.addEventListener('click', () => {
                alert(`✅ ${translations[currentLang].reviewSubmitted}`);
                reviewModal.classList.remove('show');
            });
        }
    </script>
</body>
</html>
